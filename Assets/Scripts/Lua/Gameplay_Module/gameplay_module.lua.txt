gameplay_module = {}

require "tp_character_controller"

--another name of unity classes
local UnityEngine = CS.UnityEngine
local Debug = UnityEngine.Debug
local GameObject = UnityEngine.GameObject
local LogError = Debug.LogError
local Log = Debug.Log

local gameObjs = {}
local tpChController = {}

local function findGameObjects()
    gameObjs.tpCharacter = CS.UnityEngine.GameObject.Find("TPCharacter")
    if gameObjs.tpCharacter == nil then
        LogError("can not find GameOjbect: ".."\"TPCharacter\"")
    end

    gameObjs.tpCameraPivot = CS.UnityEngine.GameObject.Find("TPCameraPivot")
    if gameObjs.tpCameraPivot == nil then
        LogError("can not find GameOjbect: ".."\"TPCameraPivot\"")
    end

    gameObjs.tpCamera = CS.UnityEngine.GameObject.Find("TPCamera")
    if gameObjs.tpCamera == nil then
        LogError("can not find GameOjbect: ".."\"TPCamera\"")
    end

    gameObjs.tpChMesh = CS.UnityEngine.GameObject.Find("BasicMotionsDummy")
    if gameObjs.tpChMesh == nil then
        LogError("can not find GameOjbect: ".."\"BasicMotionsDummy\"")
    end
end

--awake
function gameplay_module:awake()
    findGameObjects()
    tpChController = TPChController:new(gameObjs.tpCharacter,
        gameObjs.tpCameraPivot, gameObjs.tpCamera, gameObjs.tpChMesh)
end

--start
function gameplay_module:start()
    tpChController:start()
end

--update
function gameplay_module:update()
    tpChController:update()
end

--ondestroy
function gameplay_module:ondestroy()
    tpChController:destroy()
end

